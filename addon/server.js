import { Server } from '@miragejs/server';
import { getModels } from './ember-data';
import { hasEmberData } from './utils/ember-data';
import _assign from 'lodash/assign';

export { defaultPassthroughs } from '@miragejs/server';

export default class EmberServer extends Server {

  constructor(options) {
    // Merge models from autogenerated Ember Data models with user defined models
    if (hasEmberData && options.discoverEmberDataModels) {
      options.models = _assign({}, getModels(), options.models);
    }

    super(options);
  }

}
